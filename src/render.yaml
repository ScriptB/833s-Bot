services:
  - name: 833s-guardian
    type: web
    runtime: python
    plan: free
    autoDeployTrigger: commit
    # Faster deploys on Render: a single editable install pulls dependencies from pyproject.toml.
    buildCommand: pip install -U pip && pip install -e .
    startCommand: python -m guardian.render_entry
    envVars:
      - key: PYTHON_VERSION
        value: "3.11.9"
      - key: DISCORD_TOKEN
        sync: false
      - key: DEV_GUILD_ID
        value: "0"
      - key: QUEUE_MAX_BATCH
        value: "4"
      - key: QUEUE_EVERY_MS
        value: "100"
      - key: QUEUE_MAX_SIZE
        value: "10000"
      - key: CACHE_DEFAULT_TTL_SECONDS
        value: "120"
      - key: SQLITE_PATH
        value: "guardian.sqlite3"
      - key: LOG_LEVEL
        value: "INFO"
      - key: ANTI_SPAM_MAX_MSGS
        value: "6"
      - key: ANTI_SPAM_WINDOW_SECONDS
        value: "5"
      - key: ANTI_SPAM_TIMEOUT_SECONDS
        value: "30"
